{"version":3,"sources":["yeet.js"],"names":["Middle","x","same","wide","long","difference","Error","y","h","height","w","width","load","canvas","document","getElementById","context","getContext","imageElement","naturalWidth","naturalHeight","Math","abs","measurements","drawImage","filterHistory","filterFuture","applyHistory","forEach","filter","Pixels","undo","last","pop","push","redo","querySelectorAll","button","addEventListener","id","reader","window","FileReader","createElement","event","imageLabel","style","display","imageSmoothingEnabled","imageSmoothingQuality","globalCompositeOperation","src","target","result","fileElement","readFile","readAsDataURL","files","body","documentElement","classList","add","preventDefault","remove","dataTransfer","toBlob","blob","data","FormData","titleInput","secretInput","append","value","destroy","good","next","tick","textContent","fetch","method","then","catch"],"mappings":"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","file":"yeet.bfcf0526.js","sourceRoot":"../form","sourcesContent":["import Pixels from \"./process-pixels/Cargo.toml\"\n\nlet Middle = {\n\tx({same, wide, long, difference}) {\n\t\tif (same) return 0\n\t\tif (wide) return difference / 2\n\t\tif (long) return 0\n\t\tthrow new Error(\"ratio must be one of: same, wide, long\")\n\t},\n\ty({same, wide, long, difference}) {\n\t\tif (same) return 0\n\t\tif (wide) return 0\n\t\tif (long) return difference / 2\n\t\tthrow new Error(\"ratio must be one of: same, wide, long\")\n\t},\n\th({same, wide, long, difference, height}) {\n\t\tif (same) return height\n\t\tif (wide) return height\n\t\tif (long) return height - difference\n\t\tthrow new Error(\"ratio must be one of: same, wide, long\")\n\t},\n\tw({same, wide, long, difference, width}) {\n\t\tif (same) return width\n\t\tif (wide) return width - difference\n\t\tif (long) return width\n\t\tthrow new Error(\"ratio must be one of: same, wide, long\")\n\t},\n}\n\nlet load = () => {\n\tlet canvas = document.getElementById(\"canvas\")\n\tlet context = canvas.getContext(\"2d\")\n\n\tlet width = imageElement.naturalWidth\n\tlet height = imageElement.naturalHeight\n\n\tlet wide = width > height\n\tlet long = width < height\n\tlet same = width == height\n\n\tlet difference = Math.abs(width - height)\n\tlet measurements = {width, height, wide, long, same, difference}\n\n\tcontext.drawImage(\n\t\timageElement,\n\t\tMiddle.x(measurements),\n\t\tMiddle.y(measurements),\n\t\tMiddle.w(measurements),\n\t\tMiddle.h(measurements),\n\t\t0,\n\t\t0,\n\t\t1000,\n\t\t1000\n\t)\n}\n\nlet filterHistory = []\nlet filterFuture = []\nlet applyHistory = () => {\n\tload()\n\tfilterHistory.forEach(filter => {\n\t\tPixels[filter]()\n\t})\n}\n\nlet undo = () => {\n\tlet last = filterHistory.pop()\n\tif (!last) return\n\tfilterFuture.push(last)\n\tapplyHistory()\n}\n\nlet redo = () => {\n\tlet last = filterFuture.pop()\n\tif (!last) return\n\tfilterHistory.push(last)\n\tapplyHistory()\n}\nlet filter = filter => {\n\tif (filter == \"undo\") {\n\t\treturn undo()\n\t} else if (filter == \"redo\") {\n\t\treturn redo()\n\t}\n\tPixels[filter]()\n\tfilterHistory.push(filter)\n}\n\ndocument.querySelectorAll(\".filters button\").forEach(button => {\n\tbutton.addEventListener(\"click\", () => filter(button.id))\n})\n\nlet reader = new window.FileReader()\nlet imageElement = document.createElement(\"img\")\n\nreader.addEventListener(\"load\", event => {\n\tlet imageLabel = document.getElementById(\"image_label\")\n\timageLabel.style.display = \"none\"\n\tlet canvas = document.getElementById(\"canvas\")\n\tlet context = canvas.getContext(\"2d\")\n\tcontext.imageSmoothingEnabled = true\n\tcontext.imageSmoothingQuality = \"high\"\n\tcontext.globalCompositeOperation = \"copy\"\n\timageElement.src = event.target.result\n\timageElement.addEventListener(\"load\", load)\n})\n\nlet fileElement = document.getElementById(\"file\")\n\nlet readFile = () => reader.readAsDataURL(fileElement.files[0])\n\nfileElement.addEventListener(\"change\", readFile)\n\nif (fileElement.files[0]) {\n\treadFile()\n}\n\ndocument.body.addEventListener(\"dragover\", event => {\n\tdocument.documentElement.classList.add(\"drag-her\")\n\tevent.preventDefault()\n})\n\ndocument.body.addEventListener(\"drop\", event => {\n\tdocument.documentElement.classList.remove(\"drag-her\")\n\tevent.preventDefault()\n\tfileElement.files = event.dataTransfer.files\n\treadFile()\n})\n\ndocument.getElementById(\"yeet\").addEventListener(\"click\", event => {\n\tevent.preventDefault()\n\tlet canvas = document.getElementById(\"canvas\")\n\tcanvas.toBlob(\n\t\tblob => {\n\t\t\tlet data = new window.FormData()\n\t\t\tlet titleInput = document.getElementById(\"titleInput\")\n\t\t\tlet secretInput = document.getElementById(\"secretInput\")\n\t\t\tdata.append(\"photo\", blob, \"photo.jpg\")\n\t\t\tdata.append(\"title\", titleInput.value)\n\t\t\tdata.append(\"secret\", secretInput.value)\n\t\t\tlet destroy = (good = true) => {\n\t\t\t\tdocument.getElementById(\"main\").remove()\n\t\t\t\tlet next = document.createElement(\"main\")\n\t\t\t\tnext.classList.add(good ? \"yay\" : \"no\")\n\t\t\t\tdocument.documentElement.classList.add(\"yay\")\n\t\t\t\tlet tick = document.createElement(\"i\")\n\t\t\t\ttick.textContent = good ? \"✓\" : \"✗\"\n\t\t\t\tnext.append(tick)\n\t\t\t\tdocument.body.append(next)\n\t\t\t}\n\t\t\tfetch(\"post\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: data,\n\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tdestroy(\"good\")\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tdestroy(false)\n\t\t\t\t})\n\t\t},\n\t\t\"image/jpeg\",\n\t\t1\n\t)\n})\n"]}